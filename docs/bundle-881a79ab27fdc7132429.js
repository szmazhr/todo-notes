(()=>{"use strict";const t=[{id:1,title:"Default",icon:"",color:"red"},{id:2,title:"List 1",icon:"",color:"green"},{id:3,title:"List 2",icon:"",color:"#53a1b8"},{id:4,title:"List 3",icon:"",color:"green"},{id:5,title:"List 4",icon:"",color:""},{id:6,title:"List 5",icon:"",color:""},{id:7,title:"List 6",icon:"",color:""},{id:8,title:"List 7",icon:"",color:""},{id:9,title:"List 8",icon:"",color:""}],e=[{id:1,title:"Task 1",description:"This is a task, and have very long description lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",parentId:"l-1",dueDate:"2020-01-01",completed:!1},{id:2,title:"Task 2",description:"This is a task 2",parentId:"l-2",dueDate:"2020-01-01"},{id:3,title:"Task 3",description:"This is a task 3",parentId:"l-2",completed:!1},{id:4,title:"Task 4",description:"This is a task 4",parentId:"l-1",dueDate:""},{id:5,title:"Task 5",description:"This is a task 5",parentId:"l-8",dueDate:"2020-01-01"}],s=[{id:1,title:"Subtask 1",description:"This is a task 6",parentId:"t-1",dueDate:"2020-01-01"},{id:2,title:"Subtask 2",description:"This is a task 7",parentId:"t-1",dueDate:"2020-01-01"},{id:3,title:"Subtask 3",description:"This is a task 8",parentId:"t-3",dueDate:"2020-01-01"},{id:4,title:"Subtask 4",description:"This is a task 9",parentId:"t-3",dueDate:"2020-01-01"},{id:5,title:"Subtask 5",description:"This is a task 10",parentId:"t-1",dueDate:"2020-01-01"}];class i{constructor(t){this.id=t.id,this.title=t.title,this.parentId=t.parentId||"l-1",this.completed=!!t.completed,this.priority=t.priority||0,this.description=t.description,this.dueDate=t.dueDate||""}}const n=(t,e)=>{t.forEach(((s,i)=>{t[i]=new e(s),i++}))};n(e,i),n(s,i),n(t,class{constructor(t){this.id=t.id,this.title=t.title,this.icon=t.icon||"list-ul",this.color=t.color}});const a=function(){const t=this.id;return s.filter((e=>e.parentId===`t-${t}`))},o=function(){const t=this.id;return e.filter((e=>e.parentId===`l-${t}`))},c=function(t){const i="s"===t.split("-")[0]?s:e,n=t.match(/^([ts]-)[0-9]+$/i)?t.split("-")[1]:t;return i.find((t=>t.id===+n))},l=function(){const s=this.parentId.split("-")[1];return("l"===this.parentId.split("-")[0]?t:e).find((t=>t.id===+s))};t.forEach((t=>{Object.assign(t,{getTasks:o})})),e.forEach((t=>{Object.assign(t,{getSubtasks:a,getParent:l})})),s.forEach((t=>{Object.assign(t,{getParent:l})}));class r{constructor(t){this._handlers=[],this.name=t}raise=t=>this._handlers.forEach((e=>e(t)));addHandler=t=>this._handlers.push(t);removeHandler(t){const e=this._handlers;e.forEach((s=>{s===t&&e.splice(e.indexOf(s),1)}))}}const d=function(){const t=[],e=e=>{let s=t.filter((t=>t.name===e))[0];return s||(s=new r(e),t.push(s)),s};return{subscribe:(t,s)=>e(t).addHandler(s),publish:(t,s)=>e(t).raise(s),unsubscribe:(t,s)=>e(t).removeHandler(s)}}(),u={select:(t,e)=>(e||document).querySelector(t),selectAll:(t,e)=>(e||document).querySelectorAll(t),createElements:(...t)=>{const e=[];return t.forEach((t=>{const s=document.createElement(t);e.push(s)})),1==e.length?e[0]:e},createElementsByClassName(...t){const e=[];return t.forEach((t=>{const s=t.length>1&&t[1]?t[1]:"div",i=u.createElements(s);i.className=t[0],e.push(i)})),1==e.length?e[0]:e},addAttribute:(t,...e)=>{e.forEach((e=>{e[0].setAttribute(t,e[1])}))},addAttributes:(t,e)=>{for(const s in e)t.setAttribute(s,e[s])},bulkAppend(t,...e){e&&e.forEach((e=>{if(t.appendChild(e[0]),e[1]){const[t]=e.splice(0,1);this.bulkAppend(t,...e)}}))},textNode(t,e,s,i,n="afterbegin"){const a=this.createElements(e);return a.textContent=t,i&&a.insertAdjacentElement(n,i),s&&s.appendChild(a),a},bsIcon(t,e){const s=this.createElements("i");return s.className=`bi bi-${t}`,e?e.appendChild(s):s}},p=u,h=t=>{const e=/header/i.test(t)?"header":/footer/i.test(t)?"footer":"div",[s,i,n,a]=p.createElementsByClassName([t,e],["left"],["center"],["right"]);return p.bulkAppend(s,[i],[n],[a]),s};class m{constructor(t){this.template=t}render(t){let e=new Date,s=e.getHours(),i=e.getMinutes(),n=e.getSeconds(),a=e.getDate(),o=["Jan","Few","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];s<10&&(s="0"+s),i<10&&(i="0"+i),n<10&&(n="0"+n);let c=this.template.replace("h",s).replace("m",i).replace("s",n).replace("D",a).replace("M",o);t.textContent=c}stop(){return clearInterval(this.timer),"Stopped"}start(t){return this.timer=setInterval((()=>{this.render(t)}),1e3),"Started"}}function b(t,e){t.addEventListener("click",(s=>{const i=t.closest("[data-id]"),n=i.dataset.id;d.publish(e,n),console.log({element:t,parent:i,id:n,eventName:e})}))}function f(t,e){const s=p.createElementsByClassName([e,"button"]);return p.bsIcon(t,s),b(s,e),s}d.subscribe("initialize",(()=>{let t=new m("M D h:m:s");const e=p.select("#container"),s=p.select("title").textContent,[i,n,a]=p.createElementsByClassName(["title-header","header"],["app"],["content"]),o=h("app-header"),c=h("app-footer"),l=p.select(".center",o);p.textNode(s,"h1",i),e.innerHTML="",p.bulkAppend(e,[i],[n,[o],[a],[c]]),t.start(l),d.publish("initialized")}));const k=[{id:1,name:"add-new",icon:"plus-lg"},{id:2,name:"view-calender",icon:"calendar3"},{id:3,name:"view-sort",icon:"filter"},{id:4,name:"view-filter",icon:"funnel"}];function g(t,e){return t.length>e?t.substring(0,e)+"...":t}const E=[{id:1,name:"add-subtask",icon:"plus-lg"},{id:2,name:"edit-task",icon:"pencil"},{id:3,name:"delete-task",icon:"trash"},{id:4,name:"menu",icon:"three-dots-vertical"}];function A(t){const e=!!t.parentId.match(/^[t-]/i),[s,i,n,a,o,c,l,r,d,u]=p.createElementsByClassName([e?"subtask-card":"task-card"],["task-body"],["task-status"],["checkbox","input"],["label"],["task-info"],["task-name"],["task-note"],["task-side-note"],["task-action"]);p.addAttributes(a,{type:"checkbox",id:t.id});const h=t.getParent();a.checked=t.completed,o.setAttribute("for",t.id);const m=p.bsIcon(h.icon);if(p.textNode(t.title,"span",l),p.textNode(g(t.description,60),"p",r),p.textNode(h.title,"span",d,m),t.dueDate&&(p.bsIcon("dot",d),p.textNode(t.dueDate,"span",d)),!e){const e=t.getSubtasks().length,s=e>1?`subtasks (${e})`:`subtask (${e})`;p.bsIcon("dot",d);const i=p.textNode(s,"a",d);i.setAttribute("href","#subtasks"),e>0&&b(i,"subtask-list")}E.forEach((t=>{e&&"add-subtask"==t.name||u.append(f(t.icon,t.name,t.name))})),p.bulkAppend(s,[i,[n,[a],[o]],[c,[l],[r],[d]],[u]]);const k=e?`s-${t.id}`:`t-${t.id}`;return s.setAttribute("data-id",k),b(r,"toggleTask"),s}function v(t){const[e,s,i,n,a]=p.createElementsByClassName(["list-item","li"],["row"],["icon"],["count"],["title"]);return e.setAttribute("data-id",`l-${t.id}`),p.bsIcon(t.icon,i),t.color&&(i.style.color=t.color),p.textNode(t.title,"span",a),p.textNode(0,"span",n),p.bulkAppend(e,[s,[i],[a],[n]]),b(e,"view-list"),e}const x=(t=>{const e=[];return[{id:"today",title:"Today",icon:"calendar-event",color:"blue"},{id:"scheduled",title:"Scheduled",icon:"calendar3",color:"red"},{id:"all",title:"All",icon:"inbox",color:"gray"}].forEach((t=>{const s=v(t),i=p.select(".title",s),n=p.createElementsByClassName(["row"]);s.classList.add(t.title.toLowerCase()),n.appendChild(i),s.appendChild(n),e.push(s)})),e})();function C(e=1,s){const i=p.createElements("ul");1===e?i.append(...x):2===e&&t.forEach((t=>{i.append(v(t))})),s.appendChild(i)}d.subscribe("initialized",(()=>{const t=p.select(".content"),e=function(){const[t,e,s,i]=p.createElementsByClassName(["sidebar"],["lists"],["filtered-lists","section"],["all-lists","section"]);p.textNode("My Lists","h3",i),C(1,s),C(2,i);const n=function(){const[t,e,s,i,n,a,o]=p.createElementsByClassName(["profile","footer"],["row"],["avatar"],["img","img"],["info"],["name"],["email"]);p.addAttributes(i,{src:"https://avatars0.githubusercontent.com/u/1209898?s=460&v=4",alt:"avatar"}),p.textNode("Shahzar Mazhar","span",a),p.textNode("mohdshahzar.1996@gmail.com","span",o);const c=f("sliders2","setting-gear");return t.setAttribute("data-id","profile"),p.bulkAppend(t,[e,[s,[i]],[n,[a],[o]],[c]]),t}();return p.bulkAppend(t,[e,[s],[i]],[n]),t}(),s=function(){const[t,e,s]=p.createElementsByClassName(["body"],["header","header"],["main-content","main"]),i=function(){const[t,e,s]=p.createElementsByClassName(["row"],["title"],["quick-actions"]);return p.textNode("Default","h2",e),k.forEach((t=>{const e=f(t.icon,t.name,t.name);e.setAttribute("data-id",`btn-${t.name}`),s.append(e)})),p.bulkAppend(t,[e],[s]),t}();return p.bulkAppend(t,[e,[i]],[s]),t}();p.bulkAppend(t,[e],[s]),d.publish("count")})),d.subscribe("count",(()=>{p.selectAll(".count").forEach((e=>{const s=e.closest("[data-id]").getAttribute("data-id"),i=(()=>{const e=[];return t.forEach((t=>{e.push(...t.getTasks())})),e})();if("l-all"===s?p.select("span",e).textContent=i.filter((t=>!t.completed)).length:"l-scheduled"===s&&(p.select("span",e).textContent=i.filter((t=>!t.completed&&t.dueDate)).length),s.match(/^(l-)[0-9]+$/)){const i=function(e){return t.find((t=>t.id===+e))}(+s.split("-")[1]);i&&(p.select("span",e).textContent=i.getTasks().filter((t=>!t.completed)).length)}}))})),d.subscribe("subtask-list",(t=>{const e=p.select(`[data-id="${t}"]`),s=p.select(".subtasks",e),i=c(t);if(s)s.classList.remove("show"),setTimeout((()=>{e.removeChild(s)}),300);else{const t=i.getSubtasks();if(t.length){const s=p.createElementsByClassName(["subtasks"]);t.forEach((t=>{const e=A(t);s.append(e)})),e.append(s),setTimeout((()=>{s.classList.add("show")}),0)}}})),d.subscribe("toggleTask",(t=>{const e=p.select(`[data-id="${t}"]`),s=p.select(".task-note p",e),i=c(t),n=p.selectAll(".task-note p.show");s.classList.toggle("show");const a=s.classList.contains("show")?i.description:g(i.description,60);n.forEach((t=>{const e=t.closest("[data-id]").dataset.id,s=g(c(e).description,60);setTimeout((()=>{t.textContent=s}),300),t.classList.remove("show")})),s.classList.contains("show")?s.textContent=a:setTimeout((()=>{s.textContent=a}),300)})),d.subscribe("view-list",(e=>{const s=e||`l-${t[0].id}`,i=p.select(`[data-id="${s}"]`),n=i.closest("ul");if(p.selectAll(".selected",n).forEach((t=>{t.classList.remove("selected")})),i.classList.add("selected"),s.match(/^(l-)[0-9]+$/)){const e=p.select(".body"),i=p.select("header .title",e),n=p.select(".main-content",e),a=t.find((t=>t.id===parseInt(s.replace(/^(l-)/,""))));i.textContent=a.title,n.innerHTML="",a.getTasks().forEach((t=>{const e=A(t);n.append(e)})),console.log(e)}})),d.publish("initialize"),d.publish("view-list")})();