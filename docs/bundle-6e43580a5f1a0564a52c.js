(()=>{"use strict";class t{constructor(t){this._handlers=[],this.name=t}raise=t=>this._handlers.forEach((e=>e(t)));addHandler=t=>this._handlers.push(t);removeHandler(t){const e=this._handlers;e.forEach((i=>{i===t&&e.splice(e.indexOf(i),1)}))}}const e=function(){const e=[],i=i=>{let n=e.filter((t=>t.name===i))[0];return n||(n=new t(i),e.push(n)),n};return{subscribe:(t,e)=>i(t).addHandler(e),publish:(t,e)=>i(t).raise(e),unsubscribe:(t,e)=>i(t).removeHandler(e)}}();function i(t){var e;try{e=window[t];var i='{"type": "type"}';return e.setItem(i,i),e.removeItem(i),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}function n(t,e){i("localStorage")?localStorage.setItem(t,JSON.stringify(e)):console.log("Local storage not available")}function r(t){if(i("localStorage"))return JSON.parse(localStorage.getItem(t));console.log("Local storage not available")}const a=[{id:1,title:"Subtask 1",description:"This is a task 6",parentId:"t-1",priority:"1",dueDate:""},{id:2,title:"Subtask 2",description:"This is a task 7",parentId:"t-1",priority:"1",dueDate:"2020-01-01"},{id:3,title:"Subtask 3",description:"This is a task 8",parentId:"t-3",priority:"1",dueDate:"2020-01-01"},{id:4,title:"Subtask 4",description:"This is a task 9",parentId:"t-3",priority:"1",dueDate:"2020-01-01"},{id:5,title:"Subtask 5",description:"This is a task 10",parentId:"t-1",priority:"1",dueDate:"2020-01-01"}],s={listId:101,taskId:101,subtaskId:101,clock:{enabled:!0,format:"MMM dd, hh:mm:ss",position:"top-center"}},o={filterOptions:{items:[{text:"High Priority",eventName:"filter-priority-1"},{text:"Normal Priority",eventName:"filter-priority-2"},{text:"Low Priority",eventName:"filter-priority-3"},{text:"No Priority",eventName:"filter-priority-none"},{text:"Reset Priority",eventName:"filter-priority-reset"},{text:"Completed",eventName:"filter-completed"},{text:"Incompleted",eventName:"filter-incomplete"},{text:"all",eventName:"filter-status-reset"}],"target-id":"current-list",quickFilter:"today",priority:"all",status:!1},sortOptions:{by:"dueDate",direction:"asc",items:[{text:"Due Date (Ascending)",eventName:"sort-by-due-dateAsc"},{text:"Due Date (Descending)",eventName:"sort-by-due-dateDesc"},{text:"Priority L - H",eventName:"sort-by-priorityL-H"},{text:"Priority H - L",eventName:"sort-by-priorityH-L"}],"target-id":"current-list"},isSubtaskEnabled:!1,listMenuOptions:{items:[{icon:"plus-lg",text:"Add",eventName:"add-list","data-id":""},{icon:"pencil",text:"Edit",eventName:"edit-list","data-id":""},{icon:"trash",text:"Delete",eventName:"delete-list","data-id":""}],"target-id":""}},l=r("lists")||[{id:1,title:"Main tasks",icon:"",color:"red"},{id:2,title:"Addition tasks",icon:"",color:"green"},{id:3,title:"Just random test",icon:"",color:"#53a1b8"}],u=r("tasks")||[{id:1,title:"create a todo list app",description:"This is a task, and have very long description lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",parentId:"l-1",dueDate:"2022-06-01T01:28",priority:"1",completed:!0},{id:2,title:"Subtask feature",description:"sometime task have subtasks so I want to add this feature too",parentId:"l-2",priority:"3",dueDate:""},{id:3,title:"setting and customization",description:"want to add setting and customization feature like user profile and theme clock position etc",parentId:"l-2",priority:"3",completed:!1},{id:4,title:"Calender view",description:"This is a task 4",parentId:"l-2",priority:"3",dueDate:""},{id:5,title:"get rid of the ugly confirm dialog",description:"This is a task 5",parentId:"l-2",priority:"2",completed:!1,dueDate:""},{id:6,title:"get the filter and sort working",description:"This is a task, and have very long description lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",parentId:"l-1",dueDate:"2022-06-01T01:28",priority:"1",completed:!0},{id:7,title:"Add a search feature",description:"This is a task, and have very long description lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",parentId:"l-1",dueDate:"",priority:"3",completed:!1},{id:8,title:"Notification feature on task due now",description:"This is a task, and have very long description lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",parentId:"l-1",dueDate:"",priority:"3",completed:!1},{id:9,title:"Add filter and sort indicator",description:"sometime task have subtasks so I want to add this feature too",parentId:"l-2",priority:"3",dueDate:""},{id:10,title:"make the data persistent",description:"This is a tasdipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",parentId:"l-1",dueDate:"2022-06-01T01:28",priority:"1",completed:!1},{id:11,title:"make the app responsive",description:"This is a tasdipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",parentId:"l-2",dueDate:"",priority:"2",completed:!1}],c=r("settings")||s,d=[],m=[],p=[];class h{constructor(t){this.id=0===t.id?0:t.id||s.listId++,this.title=t.title,this.icon=t.icon||"list-ul",this.color=t.color||"blue"}}class f{constructor(t){this.id=0===t.id?0:t.id||s.taskId++,this.title=t.title,this.parentId=t.parentId,this.completed=!!t.completed,this.priority=t.priority||0,this.description=t.description,this.dueDate=t.dueDate||""}}const b=function(){const t=this.id;return p.filter((e=>e.parentId===`t-${t}`))},g=function(){const t=this.id;return m.filter((e=>e.parentId===`l-${t}`))},y=function(t){const e=t.toString().match(/^([l]-)[0-9]+$/i)?t.split("-")[1]:t;return d.find((t=>t.id===+e))},v=function(t){const e="s"===t.split("-")[0]?p:m,i=t.match(/^([ts]-)[0-9]+$/i)?t.split("-")[1]:t;return e.find((t=>t.id===+i))},w=function(){const t=this.parentId.split("-")[1];return("l"===this.parentId.split("-")[0]?d:m).find((e=>e.id===+t))},k={listItem(t){const i=new h(t);if(!d.find((t=>t.id===i.id)))return d.push(i),Object.assign(i,{getTasks:g}),e.publish("added-list-item",i),e.publish("refresh-list"),e.publish("count"),n("lists",d),n("settings",s),i},taskItem(t){const i=new f(t);return m.push(i),Object.assign(i,{getSubtasks:b,getParent:w}),e.publish("added-task-item",i),e.publish("refresh-list"),e.publish("count"),n("tasks",m),n("settings",s),i},subtaskItem(t){const i=new f(t);return p.push(i),Object.assign(i,{getParent:w}),e.publish("added-subtask-item",i),i}},T=(t,e)=>{t.forEach((t=>{e(t)}))};k.listItem({id:0,title:"All Tasks",icon:"inbox",color:"gray"}),e.subscribe("ready",(()=>{T(l,k.listItem),T(u,k.taskItem),s.isSubtaskEnabled&&T(a,k.subtaskItem)}));const C={select:(t,e)=>(e||document).querySelector(t),selectAll:(t,e)=>(e||document).querySelectorAll(t),createElements:(...t)=>{const e=[];return t.forEach((t=>{const i=document.createElement(t);e.push(i)})),1==e.length?e[0]:e},createElementsByClassName(...t){const e=[];return t.forEach((t=>{const i=t.length>1&&t[1]?t[1]:"div",n=C.createElements(i);n.className=t[0],e.push(n)})),1==e.length?e[0]:e},addAttribute:(t,...e)=>{e.forEach((e=>{e[0].setAttribute(t,e[1])}))},addAttributes:(t,e)=>{for(const i in e)t.setAttribute(i,e[i])},bulkAppend(t,...e){e&&e.forEach((e=>{if(t.appendChild(e[0]),e[1]){const[t]=e.splice(0,1);this.bulkAppend(t,...e)}}))},textNode(t,e,i,n,r="afterbegin"){const a=this.createElements(e);return a.textContent=t,n&&a.insertAdjacentElement(r,n),i&&i.appendChild(a),a},createInput(t,e,i,n,r,a,s="afterbegin"){const o=this.createElements("input"),l=this.createElementsByClassName([r]),u=this.createElements("label");return this.addAttributes(o,{type:t,name:e,placeholder:n,id:i}),this.addAttributes(u,{for:i}),l.append(o,u),a&&l.insertAdjacentElement(s,a),l},bsIcon(t,e){const i=this.createElements("i");return i.className=`bi bi-${t}`,e?e.appendChild(i):i}},D=C,x=t=>{const e=/header/i.test(t)?"header":/footer/i.test(t)?"footer":"div",[i,n,r,a]=D.createElementsByClassName([t,e],["left"],["center"],["right"]);return D.bulkAppend(i,[n],[r],[a]),i};function N(t,i){t.addEventListener("click",(t=>{e.publish(i,t)}))}function E(t,e){const i=D.createElementsByClassName([e,"button"]);return D.bsIcon(t,i),N(i,e),i}e.subscribe("delete-list",(()=>{const t=D.select(".all-lists .selected").dataset.id;console.log(t)})),e.subscribe("initialize",(()=>{const t=D.select("#container"),i=D.select("title").textContent,[n,r,a]=D.createElementsByClassName(["title-header","header"],["app"],["content"]),s=x("app-header"),o=x("app-footer");r.setAttribute("data-id","app"),D.textNode(i,"h1",n),t.innerHTML="",D.bulkAppend(t,[n],[r,[s],[a],[o]]),N(r,"click-anywhere"),e.publish("initialized")}));const M=[{id:1,name:"add-task",icon:"plus-lg"},{id:3,name:"view-sort",icon:"filter"},{id:4,name:"view-filter",icon:"funnel"}];function A(t,e){return t.length>e?t.substring(0,e)+"...":t}function S(t){const[e,i,n,r,a]=D.createElementsByClassName(["list-item","li"],["row"],["icon"],["count"],["title"]);return e.setAttribute("data-id",`l-${t.id}`),D.bsIcon(t.icon,n),t.color&&(n.style.color=t.color),D.textNode(A(t.title,15),"span",a),D.textNode(0,"span",r),D.bulkAppend(e,[i,[n],[a],[r]]),N(e,"view-list"),e}const I=(t=>{const e=[];return[{id:"today",title:"Today",icon:"calendar-event",color:"blue"},{id:"scheduled",title:"Scheduled",icon:"calendar3",color:"red"},{id:"all",title:"All",icon:"inbox",color:"gray"}].forEach(((t,i)=>{const n=S(t),r=D.select(".title",n),a=D.createElementsByClassName(["row"]);D.select(".icon",n).style.removeProperty("color"),n.classList.add(t.title.toLowerCase()),a.appendChild(r),n.appendChild(a),0===i&&n.classList.add("selected"),e.push(n)})),e})();function U(t=1,e){const i=D.createElements("ul");1===t?i.append(...I):2===t&&i.append(S(d[0])),e.appendChild(i)}function P(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function q(t){P(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function L(t){P(1,arguments);var e=q(t);return e.setHours(0,0,0,0),e}function O(t,e){P(2,arguments);var i=L(t),n=L(e);return i.getTime()===n.getTime()}function W(t){return P(1,arguments),O(t,Date.now())}e.subscribe("added-list-item",(t=>{D.select(".all-lists ul").append(S(t))})),e.subscribe("initialized",(()=>{const t=D.select(".content"),e=function(){const[t,e,i,n,r]=D.createElementsByClassName(["sidebar"],["lists"],["filtered-lists","section"],["all-lists","section"],["header"]),a=E("three-dots-vertical","list-menu");D.textNode("My Lists","h3",r);const s=function(){const[t,e,i,n,r,a,s]=D.createElementsByClassName(["profile","footer"],["row"],["avatar"],["img","img"],["info"],["name"],["email"]);D.addAttributes(n,{src:"https://avatars0.githubusercontent.com/u/1209898?s=460&v=4",alt:"avatar"}),D.textNode("Shahzar Mazhar","span",a),D.textNode("mohdshahzar.1996@gmail.com","span",s);const o=E("sliders2","setting-gear");return t.setAttribute("data-id","profile"),D.bulkAppend(t,[e,[i,[n]],[r,[a],[s]],[o]]),t}();return D.bulkAppend(t,[e,[i],[n,[r,[a]]]],[s]),U(1,i),U(2,n),t}(),i=function(){const[t,e,i]=D.createElementsByClassName(["body"],["header","header"],["main-content","main"]),n=function(){const[t,e,i]=D.createElementsByClassName(["row"],["title"],["quick-actions"]);return D.textNode("{Title}","h2",e),M.forEach((t=>{const e=E(t.icon,t.name,t.name);i.append(e)})),D.bulkAppend(t,[e],[i]),t}();return D.bulkAppend(t,[e,[n]],[i]),t}();D.bulkAppend(t,[e],[i])})),Math.pow(10,8);var Y=36e5;function H(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function $(t,e){P(1,arguments);var i=e||{},n=null==i.additionalDigits?2:H(i.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var r,a=R(t);if(a.date){var s=Q(a.date,n);r=X(s.restDateString,s.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var o,l=r.getTime(),u=0;if(a.time&&(u=_(a.time),isNaN(u)))return new Date(NaN);if(!a.timezone){var c=new Date(l+u),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return o=Z(a.timezone),isNaN(o)?new Date(NaN):new Date(l+u+o)}var z={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},B=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,F=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,j=/^([+-])(\d{2})(?::?(\d{2}))?$/;function R(t){var e,i={},n=t.split(z.dateTimeDelimiter);if(n.length>2)return i;if(/:/.test(n[0])?e=n[0]:(i.date=n[0],e=n[1],z.timeZoneDelimiter.test(i.date)&&(i.date=t.split(z.timeZoneDelimiter)[0],e=t.substr(i.date.length,t.length))),e){var r=z.timezone.exec(e);r?(i.time=e.replace(r[1],""),i.timezone=r[1]):i.time=e}return i}function Q(t,e){var i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(i);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:null===a?r:100*a,restDateString:t.slice((n[1]||n[2]).length)}}function X(t,e){if(null===e)return new Date(NaN);var i=t.match(B);if(!i)return new Date(NaN);var n=!!i[4],r=G(i[1]),a=G(i[2])-1,s=G(i[3]),o=G(i[4]),l=G(i[5])-1;if(n)return function(t,e,i){return e>=1&&e<=53&&i>=0&&i<=6}(0,o,l)?function(t,e,i){var n=new Date(0);n.setUTCFullYear(t,0,4);var r=7*(e-1)+i+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+r),n}(e,o,l):new Date(NaN);var u=new Date(0);return function(t,e,i){return e>=0&&e<=11&&i>=1&&i<=(V[e]||(K(t)?29:28))}(e,a,s)&&function(t,e){return e>=1&&e<=(K(t)?366:365)}(e,r)?(u.setUTCFullYear(e,a,Math.max(r,s)),u):new Date(NaN)}function G(t){return t?parseInt(t):1}function _(t){var e=t.match(F);if(!e)return NaN;var i=J(e[1]),n=J(e[2]),r=J(e[3]);return function(t,e,i){return 24===t?0===e&&0===i:i>=0&&i<60&&e>=0&&e<60&&t>=0&&t<25}(i,n,r)?i*Y+6e4*n+1e3*r:NaN}function J(t){return t&&parseFloat(t.replace(",","."))||0}function Z(t){if("Z"===t)return 0;var e=t.match(j);if(!e)return 0;var i="+"===e[1]?-1:1,n=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,r)?i*(n*Y+6e4*r):NaN}var V=[31,null,31,30,31,30,31,31,30,31,30,31];function K(t){return t%400==0||t%4==0&&t%100!=0}function tt(t){return P(1,arguments),t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}function et(t){if(P(1,arguments),!tt(t)&&"number"!=typeof t)return!1;var e=q(t);return!isNaN(Number(e))}e.subscribe("count",(()=>{D.selectAll(".count").forEach((t=>{const e=t.closest("[data-id]").getAttribute("data-id"),i=(()=>{const t=[];return d.forEach((e=>{t.push(...e.getTasks())})),t})(),n=D.select("span",t);let r=0;switch(e){case"l-scheduled":r=i.filter((t=>!t.completed&&t.dueDate)).length;break;case"l-today":r=i.filter((t=>!t.completed&&t.dueDate&&W($(t.dueDate)))).length;break;case"l-all":case"l-0":r=i.filter((t=>!t.completed)).length}if(e.match(/^(l-)[1-9][0-9]*$/)){const t=e.split("-")[1],i=y(+t);i&&(r=i.getTasks().filter((t=>!t.completed)).length)}n.textContent=r}))}));var it={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function nt(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.width?String(e.width):t.defaultWidth,n=t.formats[i]||t.formats[t.defaultWidth];return n}}var rt,at={date:nt({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:nt({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:nt({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},st={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ot(t){return function(e,i){var n,r=i||{};if("formatting"===(r.context?String(r.context):"standalone")&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,s=r.width?String(r.width):a;n=t.formattingValues[s]||t.formattingValues[a]}else{var o=t.defaultWidth,l=r.width?String(r.width):t.defaultWidth;n=t.values[l]||t.values[o]}return n[t.argumentCallback?t.argumentCallback(e):e]}}function lt(t){return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.width,r=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(r);if(!a)return null;var s,o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?ct(l,(function(t){return t.test(o)})):ut(l,(function(t){return t.test(o)}));s=t.valueCallback?t.valueCallback(u):u,s=i.valueCallback?i.valueCallback(s):s;var c=e.slice(o.length);return{value:s,rest:c}}}function ut(t,e){for(var i in t)if(t.hasOwnProperty(i)&&e(t[i]))return i}function ct(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return i}const dt={code:"en-US",formatDistance:function(t,e,i){var n,r=it[t];return n="string"==typeof r?r:1===e?r.one:r.other.replace("{{count}}",e.toString()),null!=i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n},formatLong:at,formatRelative:function(t,e,i,n){return st[t]},localize:{ordinalNumber:function(t,e){var i=Number(t),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:ot({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ot({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ot({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ot({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ot({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(rt={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.match(rt.matchPattern);if(!i)return null;var n=i[0],r=t.match(rt.parsePattern);if(!r)return null;var a=rt.valueCallback?rt.valueCallback(r[0]):r[0];a=e.valueCallback?e.valueCallback(a):a;var s=t.slice(n.length);return{value:a,rest:s}}),era:lt({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:lt({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:lt({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:lt({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:lt({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function mt(t,e){P(2,arguments);var i=q(t).getTime(),n=H(e);return new Date(i+n)}function pt(t,e){P(2,arguments);var i=H(e);return mt(t,-i)}var ht=864e5;function ft(t){P(1,arguments);var e=1,i=q(t),n=i.getUTCDay(),r=(n<e?7:0)+n-e;return i.setUTCDate(i.getUTCDate()-r),i.setUTCHours(0,0,0,0),i}function bt(t){P(1,arguments);var e=q(t),i=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(i+1,0,4),n.setUTCHours(0,0,0,0);var r=ft(n),a=new Date(0);a.setUTCFullYear(i,0,4),a.setUTCHours(0,0,0,0);var s=ft(a);return e.getTime()>=r.getTime()?i+1:e.getTime()>=s.getTime()?i:i-1}function gt(t){P(1,arguments);var e=bt(t),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var n=ft(i);return n}var yt=6048e5;function vt(t,e){P(1,arguments);var i=e||{},n=i.locale,r=n&&n.options&&n.options.weekStartsOn,a=null==r?0:H(r),s=null==i.weekStartsOn?a:H(i.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=q(t),l=o.getUTCDay(),u=(l<s?7:0)+l-s;return o.setUTCDate(o.getUTCDate()-u),o.setUTCHours(0,0,0,0),o}function wt(t,e){P(1,arguments);var i=q(t),n=i.getUTCFullYear(),r=e||{},a=r.locale,s=a&&a.options&&a.options.firstWeekContainsDate,o=null==s?1:H(s),l=null==r.firstWeekContainsDate?o:H(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(n+1,0,l),u.setUTCHours(0,0,0,0);var c=vt(u,e),d=new Date(0);d.setUTCFullYear(n,0,l),d.setUTCHours(0,0,0,0);var m=vt(d,e);return i.getTime()>=c.getTime()?n+1:i.getTime()>=m.getTime()?n:n-1}function kt(t,e){P(1,arguments);var i=e||{},n=i.locale,r=n&&n.options&&n.options.firstWeekContainsDate,a=null==r?1:H(r),s=null==i.firstWeekContainsDate?a:H(i.firstWeekContainsDate),o=wt(t,e),l=new Date(0);l.setUTCFullYear(o,0,s),l.setUTCHours(0,0,0,0);var u=vt(l,e);return u}var Tt=6048e5;function Ct(t,e){for(var i=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return i+n}const Dt=function(t,e){var i=t.getUTCFullYear(),n=i>0?i:1-i;return Ct("yy"===e?n%100:n,e.length)},xt=function(t,e){var i=t.getUTCMonth();return"M"===e?String(i+1):Ct(i+1,2)},Nt=function(t,e){return Ct(t.getUTCDate(),e.length)},Et=function(t,e){return Ct(t.getUTCHours()%12||12,e.length)},Mt=function(t,e){return Ct(t.getUTCHours(),e.length)},At=function(t,e){return Ct(t.getUTCMinutes(),e.length)},St=function(t,e){return Ct(t.getUTCSeconds(),e.length)},It=function(t,e){var i=e.length,n=t.getUTCMilliseconds();return Ct(Math.floor(n*Math.pow(10,i-3)),e.length)};function Ut(t,e){var i=t>0?"-":"+",n=Math.abs(t),r=Math.floor(n/60),a=n%60;if(0===a)return i+String(r);var s=e||"";return i+String(r)+s+Ct(a,2)}function Pt(t,e){return t%60==0?(t>0?"-":"+")+Ct(Math.abs(t)/60,2):qt(t,e)}function qt(t,e){var i=e||"",n=t>0?"-":"+",r=Math.abs(t);return n+Ct(Math.floor(r/60),2)+i+Ct(r%60,2)}const Lt={G:function(t,e,i){var n=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})}},y:function(t,e,i){if("yo"===e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return i.ordinalNumber(r,{unit:"year"})}return Dt(t,e)},Y:function(t,e,i,n){var r=wt(t,n),a=r>0?r:1-r;return"YY"===e?Ct(a%100,2):"Yo"===e?i.ordinalNumber(a,{unit:"year"}):Ct(a,e.length)},R:function(t,e){return Ct(bt(t),e.length)},u:function(t,e){return Ct(t.getUTCFullYear(),e.length)},Q:function(t,e,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ct(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ct(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,i){var n=t.getUTCMonth();switch(e){case"M":case"MM":return xt(t,e);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,i){var n=t.getUTCMonth();switch(e){case"L":return String(n+1);case"LL":return Ct(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,i,n){var r=function(t,e){P(1,arguments);var i=q(t),n=vt(i,e).getTime()-kt(i,e).getTime();return Math.round(n/Tt)+1}(t,n);return"wo"===e?i.ordinalNumber(r,{unit:"week"}):Ct(r,e.length)},I:function(t,e,i){var n=function(t){P(1,arguments);var e=q(t),i=ft(e).getTime()-gt(e).getTime();return Math.round(i/yt)+1}(t);return"Io"===e?i.ordinalNumber(n,{unit:"week"}):Ct(n,e.length)},d:function(t,e,i){return"do"===e?i.ordinalNumber(t.getUTCDate(),{unit:"date"}):Nt(t,e)},D:function(t,e,i){var n=function(t){P(1,arguments);var e=q(t),i=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),r=i-n;return Math.floor(r/ht)+1}(t);return"Do"===e?i.ordinalNumber(n,{unit:"dayOfYear"}):Ct(n,e.length)},E:function(t,e,i){var n=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,i,n){var r=t.getUTCDay(),a=(r-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ct(a,2);case"eo":return i.ordinalNumber(a,{unit:"day"});case"eee":return i.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,i,n){var r=t.getUTCDay(),a=(r-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ct(a,e.length);case"co":return i.ordinalNumber(a,{unit:"day"});case"ccc":return i.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(r,{width:"narrow",context:"standalone"});case"cccccc":return i.day(r,{width:"short",context:"standalone"});default:return i.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,i){var n=t.getUTCDay(),r=0===n?7:n;switch(e){case"i":return String(r);case"ii":return Ct(r,e.length);case"io":return i.ordinalNumber(r,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,i){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,i){var n,r=t.getUTCHours();switch(n=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,i){var n,r=t.getUTCHours();switch(n=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",e){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,i){if("ho"===e){var n=t.getUTCHours()%12;return 0===n&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return Et(t,e)},H:function(t,e,i){return"Ho"===e?i.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Mt(t,e)},K:function(t,e,i){var n=t.getUTCHours()%12;return"Ko"===e?i.ordinalNumber(n,{unit:"hour"}):Ct(n,e.length)},k:function(t,e,i){var n=t.getUTCHours();return 0===n&&(n=24),"ko"===e?i.ordinalNumber(n,{unit:"hour"}):Ct(n,e.length)},m:function(t,e,i){return"mo"===e?i.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):At(t,e)},s:function(t,e,i){return"so"===e?i.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):St(t,e)},S:function(t,e){return It(t,e)},X:function(t,e,i,n){var r=(n._originalDate||t).getTimezoneOffset();if(0===r)return"Z";switch(e){case"X":return Pt(r);case"XXXX":case"XX":return qt(r);default:return qt(r,":")}},x:function(t,e,i,n){var r=(n._originalDate||t).getTimezoneOffset();switch(e){case"x":return Pt(r);case"xxxx":case"xx":return qt(r);default:return qt(r,":")}},O:function(t,e,i,n){var r=(n._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ut(r,":");default:return"GMT"+qt(r,":")}},z:function(t,e,i,n){var r=(n._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ut(r,":");default:return"GMT"+qt(r,":")}},t:function(t,e,i,n){var r=n._originalDate||t;return Ct(Math.floor(r.getTime()/1e3),e.length)},T:function(t,e,i,n){return Ct((n._originalDate||t).getTime(),e.length)}};function Ot(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}}function Wt(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}}var Yt={p:Wt,P:function(t,e){var i,n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Ot(t,e);switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"})}return i.replace("{{date}}",Ot(r,e)).replace("{{time}}",Wt(a,e))}};const Ht=Yt;function $t(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var zt=["D","DD"],Bt=["YY","YYYY"];function Ft(t){return-1!==zt.indexOf(t)}function jt(t){return-1!==Bt.indexOf(t)}function Rt(t,e,i){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(i,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(i,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(i,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(i,"`; see: https://git.io/fxCyr"))}var Qt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gt=/^'([^]*?)'?$/,_t=/''/g,Jt=/[a-zA-Z]/;function Zt(t,e,i){P(2,arguments);var n=String(e),r=i||{},a=r.locale||dt,s=a.options&&a.options.firstWeekContainsDate,o=null==s?1:H(s),l=null==r.firstWeekContainsDate?o:H(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=a.options&&a.options.weekStartsOn,c=null==u?0:H(u),d=null==r.weekStartsOn?c:H(r.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var m=q(t);if(!et(m))throw new RangeError("Invalid time value");var p=$t(m),h=pt(m,p),f={firstWeekContainsDate:l,weekStartsOn:d,locale:a,_originalDate:m},b=n.match(Xt).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,Ht[e])(t,a.formatLong,f):t})).join("").match(Qt).map((function(i){if("''"===i)return"'";var n=i[0];if("'"===n)return Vt(i);var s=Lt[n];if(s)return!r.useAdditionalWeekYearTokens&&jt(i)&&Rt(i,e,t),!r.useAdditionalDayOfYearTokens&&Ft(i)&&Rt(i,e,t),s(h,i,a.localize,f);if(n.match(Jt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return i})).join("");return b}function Vt(t){return t.match(Gt)[1].replace(_t,"'")}const Kt=[{id:2,name:"edit-task",icon:"pencil"},{id:3,name:"delete-task",icon:"trash"},{id:4,name:"menu",icon:"three-dots-vertical"}];function te(t){const i=!!t.parentId.match(/^[t-]/i),[n,r,a,s,l,u,c,d,m,p]=D.createElementsByClassName([i?"subtask-card":"task-card"],["task-body"],["task-status"],["checkbox","input"],["label"],["task-info"],["task-name"],["task-note"],["task-side-note"],["task-action"]),h=i?`s-${t.id}`:`t-${t.id}`,f=t.getParent();l.setAttribute("for",h),D.addAttributes(s,{type:"checkbox",id:h}),s.checked=t.completed,s.addEventListener("change",(()=>{e.publish("task-status-change",t)})),D.textNode(t.title,i?"h4":"h3",c);let b=D.textNode(A(t.description,60),"p",d);if(!i){const t=D.bsIcon(f.icon);D.textNode(f.title,"span",m,t),D.bsIcon("dot",m)}if(t.dueDate&&D.textNode(Zt($(t.dueDate),"dd/MM/yyyy hh:mm"),"span",m),!i&&o.isSubtaskEnabled){D.bsIcon("dot",m);const e=t.getSubtasks().length,i=e>1?`subtasks (${e})`:`subtask (${e})`,n=D.textNode(i,"a",m);n.setAttribute("href","#subtasks"),e>0&&N(n,"subtask-list")}const g=D.createElementsByClassName([`task-priority priority-${t.priority}`]);n.appendChild(g),Kt.forEach((t=>{i&&"add-subtask"==t.name||p.append(E(t.icon,t.name,t.name))})),D.bulkAppend(n,[r,[a,[s],[l]],[u,[c],[d],[m]],[p]]);const y=i?`s-${t.id}`:`t-${t.id}`;return n.setAttribute("data-id",y),N(b,"toggleTask"),n}e.subscribe("render-task",(t=>{D.select(".body .main-content").append(te(t))})),e.subscribe("subtask-list",(t=>{const e=t.target.closest("[data-id]"),i=D.select(".subtasks",e),n=D.selectAll(".subtasks"),r=e.dataset.id,a=v(r);if(!i){const t=a.getSubtasks();if(t.length){const i=D.createElementsByClassName(["subtasks"]);t.forEach((t=>{const e=te(t);i.append(e)})),e.append(i),setTimeout((()=>{i.classList.add("show")}),0)}}n&&n.forEach((t=>{t.classList.remove("show"),setTimeout((()=>{t.remove()}),300)}))})),e.subscribe("toggleTask",(t=>{const e=t.currentTarget,i=e.closest("[data-id]").dataset.id,n=v(i),r=D.selectAll(".task-note p.show");e.classList.toggle("show");const a=e.classList.contains("show")?n.description:A(n.description,60);r.forEach((t=>{const e=t.closest("[data-id]").dataset.id,i=A(v(e).description,60);setTimeout((()=>{t.textContent=i}),300),t.classList.remove("show")})),e.classList.contains("show")?e.textContent=a:setTimeout((()=>{e.textContent=a}),300)})),e.subscribe("filter-priority-1",(()=>{e.publish("filter-tasks",{priority:1})})),e.subscribe("filter-priority-2",(()=>{e.publish("filter-tasks",{priority:2})})),e.subscribe("filter-priority-3",(()=>{e.publish("filter-tasks",{priority:3})})),e.subscribe("filter-priority-none",(()=>{e.publish("filter-tasks",{priority:0})})),e.subscribe("filter-priority-reset",(()=>{e.publish("filter-tasks",{priority:"all"})})),e.subscribe("filter-completed",(()=>{e.publish("filter-tasks",{status:!0})})),e.subscribe("filter-incomplete",(()=>{e.publish("filter-tasks",{status:!1})})),e.subscribe("filter-status-reset",(()=>{e.publish("filter-tasks",{status:"all"})})),e.subscribe("sort-by-due-dateAsc",(()=>{e.publish("sort-tasks",{by:"dueDate",direction:"asc"})})),e.subscribe("sort-by-due-dateDesc",(()=>{e.publish("sort-tasks",{by:"dueDate",direction:"desc"})})),e.subscribe("sort-by-priorityL-H",(()=>{e.publish("sort-tasks",{by:"priority",direction:"asc"})})),e.subscribe("sort-by-priorityH-L",(()=>{e.publish("sort-tasks",{by:"priority",direction:"desc"})})),e.subscribe("filter-tasks",(t=>{void 0!==t.quickFilter&&(o.filterOptions.quickFilter=t.quickFilter),void 0!==t.priority&&(o.filterOptions.priority=t.priority),void 0!==t.status&&(o.filterOptions.status=t.status),e.publish("refresh-list")})),e.subscribe("sort-tasks",(t=>{t.by&&(o.sortOptions.by=t.by),t.direction&&(o.sortOptions.direction=t.direction),e.publish("refresh-list")})),e.subscribe("view-list",(t=>{const i=t?t.currentTarget:D.select(".all-lists [data-id='l-0']"),n=i.dataset.id;if(n.match(/^(l-)[0-9]+$/)&&t){const e=t.offsetX,n=t.offsetY;i.style.clipPath=`circle(0px at ${e}px ${n}px)`,setTimeout((()=>{i.style.clipPath="circle(100%)",setTimeout((()=>{i.style.removeProperty("clip-path")}),300)}),0)}!function(t){const i=D.select(`.lists [data-id="${t}"]`),n=i.closest("ul");if(D.selectAll(".selected",n).forEach((t=>{t.classList.remove("selected")})),t.match(/^(l-)(today|all|scheduled)*$/)){const i=t.split("-")[1];e.publish("filter-tasks",{quickFilter:i})}i.classList.add("selected")}(n),e.publish("refresh-list",n)})),e.subscribe("refresh-list",(t=>{t=t&&t.match(/^(l-)[0-9]+$/)?t:document.querySelector(".body").dataset.id;const i=D.select(".body"),n=D.select("header .title h2",i);D.select(".main-content",i).innerHTML="",i.setAttribute("data-id",t),o.listMenuOptions["target-id"]="l-0"===t?"":t;const r=d.find((e=>e.id===parseInt(t.replace(/^(l-)/,"")))),a=[];n.textContent=r.title,"l-0"===t?d.forEach((t=>{a.push(...t.getTasks())})):a.push(...r.getTasks()),function(t){const e=function(t){const{quickFilter:e,priority:i,status:n}=o.filterOptions;let r=t;return"today"===e?r=t.filter((t=>t.dueDate&&W($(t.dueDate)))):"scheduled"===e&&(r=t.filter((t=>t.dueDate))),"all"!==i&&(r=r.filter((t=>parseInt(t.priority)===parseInt(i)))),"all"!==n&&(r=r.filter((t=>t.completed===n))),r}(t);return function(t){const{by:e,direction:i}=o.sortOptions;let n=t;return"dueDate"===e?n="asc"===i?t.sort(((t,e)=>$(t.dueDate)-$(e.dueDate))):t.sort(((t,e)=>$(e.dueDate)-$(t.dueDate))):"priority"===e&&(n="asc"===i?t.sort(((t,e)=>parseInt(t.priority)-parseInt(e.priority))):t.sort(((t,e)=>parseInt(e.priority)-parseInt(t.priority)))),n}(e)}(a).forEach((t=>{e.publish("render-task",t)}))})),e.subscribe("initialized",(()=>{if(c.clock.enabled){const t="top"===c.clock.position.split("-")[0]?D.select(".app-header"):D.select(".app-footer"),e=`.${c.clock.position.split("-")[1]}`,i=D.select(e,t),n=D.textNode("{clock}","span",i);let r=new Date;setInterval((()=>{r=function(t,e){P(2,arguments);var i=H(e);return mt(t,1e3*i)}(r,1),n.textContent=Zt(r,c.clock.format)}),1e3)}})),e.subscribe("initialized",(()=>{const t=D.select(".app-footer"),e=D.select(".right",t),i=D.createElements("a");i.setAttribute("href","https://github.com/szmazhr/todo-notes"),i.setAttribute("target","_blank"),D.bsIcon("github",i),e.appendChild(i)}));const ee=(()=>{const[t,e,i,n,r,a]=D.createElementsByClassName(["pop-up"],["pop-up-content"],["pop-up-header"],["title"],["quick-button"],["pop-up-body"]),s=E("x-lg","cancel-button"),o=E("check-lg","save-button"),l=D.textNode("Add New","h2",n);return t.setAttribute("data-id","pop-up"),D.bulkAppend(t,[e,[i,[n],[r,[s],[o]]],[a]]),(e,i)=>{l.textContent=i;const n=D.select(".app");a.appendChild(e),n.appendChild(t)}})();e.subscribe("open-pop-up",(()=>{const t=D.select(".pop-up");t.classList.add("show"),setTimeout((()=>{t.classList.add("showed"),t.classList.remove("show")}),0)})),e.subscribe("close-pop-up",(()=>{const t=D.select(".pop-up");t.classList.remove("showed"),t.classList.add("show"),setTimeout((()=>{t.classList.remove("show"),t.remove()}),300)})),e.subscribe("save-button",(t=>{const i=t.target.closest(".pop-up"),n=D.select("form",i);n.classList.contains("list-form")?e.publish("list-form-submit",t):n.classList.contains("task-form")&&e.publish("task-form-submit",t),e.publish("close-pop-up")})),e.subscribe("cancel-button",(()=>{const t=D.select("form");setTimeout((()=>{t.reset(),t.remove()}),300),e.publish("close-pop-up")}));const ie=["blue","orange","yellow","green","red","purple"],ne=["list-ul","cart4","bank","book","controller","dribbble","envelope-paper"],re=(()=>{const[t,e,i,n]=D.createElementsByClassName(["list-form","form"],["icon-wrapper"],["form-control delete-list"],["delete-button","button"]);D.bsIcon("list-ul",e);const r=D.createInput("text","list-name","list-name","List Name","form-control name-field",e),a=D.createInput("hidden","list-color","list-color","List Color","form-control  color-gallery"),s=D.createInput("hidden","list-icon","list-icon","List Icon","form-control  icon-gallery"),o=D.createElements("input");return D.addAttributes(o,{type:"hidden",name:"list-id",value:""}),ie.forEach((t=>{const e=D.createElementsByClassName(["color-display"]);e.style.backgroundColor=t,e.setAttribute("data-color",t),a.appendChild(e),N(e,"list-color-selected"),e.setAttribute("data-id",t)})),ne.forEach((t=>{const e=D.createElementsByClassName(["icon-display"]);D.bsIcon(t,e),e.setAttribute("data-icon",t),s.appendChild(e),N(e,"list-icon-selected"),e.setAttribute("data-id",t)})),n.textContent="Delete List",i.appendChild(n),D.bulkAppend(t,[o],[r],[a],[s]),t.addEventListener("submit",(t=>{t.preventDefault()})),e=>(e&&t.appendChild(i),t)})();function ae(t){const e=D.select(`[data-id=${t}]`),i=e.parentElement,n=D.select("input",i);D.selectAll(".selected",i).forEach((t=>{t.classList.remove("selected")})),document.querySelector(".icon-wrapper").style.backgroundColor=t,n.value=t,e.classList.add("selected")}function se(t){const e=D.select(`[data-id=${t}]`),i=e.parentElement,n=D.select("input",i),r=D.selectAll(".selected",i);n.value=t,document.querySelector(".icon-wrapper i").className=`bi bi-${t}`,r.forEach((t=>{t.classList.remove("selected")})),e.classList.add("selected")}e.subscribe("delete-list",(t=>{const i=t.target.closest("[data-id]").dataset.id,r=y(i),a=d.indexOf(r);if(1==confirm(`Are you sure you want to delete ${r.title} list? All its task will be deleted`)){const t=D.select(`.all-lists ul [data-id="${i}"]`);d.splice(a,1),t.remove(),e.publish("count"),e.publish("refresh-list","l-0"),n("lists",d)}})),e.subscribe("edit-list",(t=>{const i=t.target.closest("[data-id]").dataset.id,n=y(i);ee(re(),"Edit list"),e.publish("open-pop-up");const r=D.select("form");r["list-id"].value=n.id,r["list-name"].value=n.title,ae(n.color),se(n.icon)})),e.subscribe("add-list",(()=>{ee(re(),"Add new list"),e.publish("open-pop-up"),ae("blue"),se("list-ul")})),e.subscribe("list-color-selected",(t=>{ae(t.currentTarget.dataset.id)})),e.subscribe("list-icon-selected",(t=>{se(t.currentTarget.dataset.id)})),e.subscribe("list-form-submit",(()=>{const t=D.select("form"),e={id:parseInt(t["list-id"].value.replace(/^(l-)/,""))||"",title:t["list-name"].value||"New List",color:t["list-color"].value||"blue",icon:t["list-icon"].value||"list-ul"};if(t["list-id"].value){const t=y(e.id),i=d.indexOf(t),n=D.select(`.all-lists ul [data-id="l-${e.id}"]`);d.splice(i,1),n.remove()}k.listItem(e),t.reset()}));const oe=(()=>{const[t,e,i,n,r]=D.createElementsByClassName(["task-form","form"],["form-control"],["","textarea"],["form-control"],["","legend"]),a=D.createInput("text","title","task-title","Name","form-control"),s=D.createInput("text","dueDate","task-dueDate","dd/mm/yyyy, --:--","form-control");n.appendChild(r),r.textContent="Priority",["High","Normal","Low"].forEach(((t,e)=>{const i=D.createInput("radio","priority",`task-priority-${t.toLowerCase()}`,`${t} Priority`,"radio"),r=D.select("label",i),a=D.select("input",i);D.addAttributes(a,{value:e+1}),r.textContent=t,n.appendChild(i)}));const o=D.createElements("input");return D.select("input",s).setAttribute("onfocus",'(this.type="datetime-local")'),D.addAttributes(o,{type:"hidden",name:"task-id",value:""}),D.addAttributes(i,{type:"text",rows:"6",id:"task-description",name:"description",placeholder:"Description"}),D.bulkAppend(t,[o],[a],[e,[i]],[s]),t.addEventListener("submit",(t=>{t.preventDefault()})),e=>(e||t.appendChild(n),t)})();e.subscribe("task-status-change",(t=>{t.completed?t.completed=!1:t.completed=!0,e.publish("refresh-list"),e.publish("count"),n("tasks",m)})),e.subscribe("delete-task",(t=>{const i=t.target.closest("[data-id]").dataset.id,r=v(i),a=m.indexOf(r);if(1==confirm(`Are you sure you want to delete ${r.title} task? All its subtask will be deleted`)){const t=D.select(`.body .main-content [data-id="${i}"]`);m.splice(a,1),t.remove(),e.publish("refresh-list"),e.publish("count"),n("tasks",m)}})),e.subscribe("edit-task",(t=>{const i=t.target.closest("[data-id]").dataset.id,n=v(i);ee(oe(),"Edit Task"),e.publish("open-pop-up");const r=D.select("form");r.setAttribute("data-id",n.parentId),r["task-id"].value=`t-${n.id}`,r.title.value=n.title,r.description.value=n.description,r.dueDate.value=n.dueDate,r.priority.value=n.priority?n.priority:""})),e.subscribe("add-task",(t=>{ee(oe(),"Add new Task"),e.publish("open-pop-up");const i=D.select("form"),n=t.target.closest("[data-id]").dataset.id;i.setAttribute("data-id",n)})),e.subscribe("task-form-submit",(()=>{const t=D.select("form"),e=t.dataset.id,i=t["task-id"].value,n=i.match(/^(t-)/),r={id:parseInt(i.replace(/^([ts]-)/,""))||"",title:t.title.value||"New "+(n?"subtask":"task"),description:t.description.value||"",dueDate:t.dueDate.value||"",priority:t.priority.value||0,parentId:e};if(i){const t=v(i),e=m.indexOf(t),n=D.select(`.main-content [data-id="${i}"]`);m.splice(e,1),n.remove()}k.taskItem(r),t.reset()}));const le=(()=>{const[t,e]=D.createElementsByClassName(["dropdown-menu"],["dropdown-body"]);return t.appendChild(e),i=>(e.innerHTML="",t.setAttribute("data-id",i["target-id"]),i.items.forEach((t=>{""===i["target-id"]&&0!==i.items.indexOf(t)||e.appendChild(function(t){const e=D.createElementsByClassName(["dropdown-item"]);return t.icon&&D.bsIcon(`${t.icon}`,e),D.textNode(`${t.text}`,"span",e),N(e,t.eventName),e}(t))})),t)})();e.subscribe("list-menu",(t=>{const e=t.target.closest(".header");t.stopPropagation(),e.append(le(o.listMenuOptions))})),e.subscribe("click-anywhere",(t=>{const e=D.select(".dropdown-menu",t.currentTarget);e&&e.remove()})),e.subscribe("view-filter",(t=>{const e=t.target.closest(".header");t.stopPropagation(),e.append(le(o.filterOptions))})),e.subscribe("view-sort",(t=>{const e=t.target.closest(".header");t.stopPropagation(),e.append(le(o.sortOptions))})),e.publish("initialize"),e.publish("view-list"),e.publish("ready")})();